  {% extends "users/base.html" %}

  {% block title %}Exams & Quizzes | Ptr Brightera Academy{% endblock %}

  {% block content %}

  <div class="mt-4 text-center">
    <h1 class="h2 fw-bold">My Exams & Quizzes</h1>
    <p class="text-muted">
      Complete your course to unlock quizzes and exams
    </p>
  </div>

  <div class="row mt-5">

    <!-- QUIZZES SECTION -->
    <div class="col-lg-6 mb-4">
      <h3 class="h5 fw-bold mb-3 border-bottom pb-2">
        Quizzes
      </h3>

      <div class="row justify-content-center">
        {% for course in courses %}
          <div class="col-md-10 col-lg-9 mb-3">
            <div class="card shadow-sm">

              <div class="card-body p-3">
                <h6 class="fw-bold mb-2">{{ course.title }}</h6>

                <p class="text-muted small mb-3">
                  Progress: {{ course.progress }}%
                </p>

                {% if course.quiz_id %}
                  {% if course.progress == 100 %}

                    {% if course.best_percentage == 100 %}
                      <button class="btn btn-outline-success btn-sm w-100" disabled>
                        Quiz Passed
                      </button>
                    {% else %}
                      <a href="{{ url_for('start_quiz', course_slug=course.slug) }}"
                         class="btn btn-success btn-sm w-100">
                        Take Quiz
                      </a>
                    {% endif %}

                  {% else %}
                    <button class="btn btn-secondary btn-sm w-100" disabled>
                      Quiz Locked
                    </button>
                  {% endif %}
                {% else %}
                  <button class="btn btn-outline-secondary btn-sm w-100" disabled>
                    No Quiz Available
                  </button>
                {% endif %}

              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- EXAMS SECTION -->
    <div class="col-lg-6 mb-4">
      <h3 class="h5 fw-bold mb-3 border-bottom pb-2">
        Exams
      </h3>

      {% if exams %}
        {% for exam in exams %}
          <div class="card mb-3 shadow-sm">
            <div class="card-body p-3">

              <h6 class="fw-bold mb-2">{{ exam.title }}</h6>

              <p class="text-muted small mb-3">
                Course: {{ exam.course_title }}
              </p>

              {% if exam.unlocked %}
                <a href="{{ url_for('start_exam', exam_id=exam.id) }}"
                   class="btn btn-primary btn-sm w-100">
                  Take Exam
                </a>
              {% else %}
                <button class="btn btn-secondary btn-sm w-100" disabled>
                  Exam Locked
                </button>
              {% endif %}

            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="alert alert-light text-muted">
          No exams available yet.
        </div>
      {% endif %}
    </div>

  </div>

  {% endblock %}
